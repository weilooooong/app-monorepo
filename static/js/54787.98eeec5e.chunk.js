"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[54787],{154787:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var o,r=n(256666),a=n(539144),c=n(877531),i=n(259924),u=n(968079),l=n(18861),d=n(435581),s=n(196234),p=n(107867),f=n(866904),y=n(202784),x=n(472719),_=n(783112),m=n(945821),v=n(481047),g=n(768496),h=n(27172),w=n(146571),b=n(398145);!function(e){e.Name="Name",e.ExportPublicKey="ExportPublicKey",e.ExportPrivateKey="ExportPrivateKey",e.ExportSecretMnemonic="ExportSecretMnemonic",e.ExportPrivateViewKey="ExportPrivateViewKey",e.ExportPrivateSpendKey="ExportPrivateSpendKey",e.HardwareCanNotExportPrivateKey="HardwareCanNotExportPrivateKey",e.RemoveAccount="RemoveAccount"}(o||(o={}));var k=[o.ExportPrivateViewKey,o.ExportPrivateSpendKey,o.ExportSecretMnemonic],P=function(e){var t;return(t={})[o.Name]={label:e.formatMessage({id:"form__name"}),key:o.Name},t[o.ExportPublicKey]={label:e.formatMessage({id:"form__export_public_key"}),key:o.ExportPublicKey,description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_see_your_entire_transaction_history"})},t[o.HardwareCanNotExportPrivateKey]={key:o.HardwareCanNotExportPrivateKey},t[o.ExportPrivateKey]={label:e.formatMessage({id:"action__export_private_key"}),key:o.ExportPrivateKey,description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_take_full_control_of_your_account"}),credentialInfo:{type:b.AccountCredentialType.PrivateKey,key:"action__export_private_key"}},t[o.ExportPrivateViewKey]={label:e.formatMessage({id:"action__export_private_view_key"}),description:e.formatMessage({id:"action__export_private_view_key_desc"}),key:o.ExportPrivateViewKey,credentialInfo:{type:b.AccountCredentialType.PrivateViewKey,key:"action__export_view_key"}},t[o.ExportPrivateSpendKey]={label:e.formatMessage({id:"action__export_private_spend_key"}),description:e.formatMessage({id:"action__export_private_spend_key_desc"}),key:o.ExportPrivateSpendKey,credentialInfo:{type:b.AccountCredentialType.PrivateSpendKey,key:"action__export_spend_key"}},t[o.ExportSecretMnemonic]={label:e.formatMessage({id:"action__export_secret_mnemonic"}),description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_take_full_control_of_your_account"}),key:o.ExportSecretMnemonic,credentialInfo:{type:b.AccountCredentialType.Mnemonic,key:"action__export_secret_mnemonic"}},t[o.RemoveAccount]={label:e.formatMessage({id:"action__remove_account"}),key:o.RemoveAccount},t},M=n(859071);var I=n(552322),E=function(e){var t=e.item,n=e.onPress;return(0,I.jsxs)(p.default,{onPress:function(){return n(t)},mx:-2,my:1.5,flexDirection:"column",alignItems:"flex-start",children:[(0,I.jsx)(f.default,{typography:"Body1Strong",color:"text-default",children:t.label}),(0,I.jsx)(f.default,{typography:"Body2",color:"text-subdued",children:t.description})]})};const j=function(){var e=(0,_.default)(),t=(0,x.useNavigation)(),n=(0,w.default)(),r=n.goToRemoveAccount,a=n.RemoveAccountDialog,b=(0,y.useState)(!1),j=(0,s.default)(b,2),S=j[0],C=j[1],K=(0,y.useState)(),A=(0,s.default)(K,2),R=A[0],O=A[1],N=(0,x.useRoute)().params,D=N.walletId,B=N.accountId,T=N.networkId,F=N.refreshAccounts,V=m.default.engine,z=(0,y.useState)(),H=(0,s.default)(z,2),q=H[0],L=H[1],W=(0,y.useState)(),G=(0,s.default)(W,2),U=G[0],J=G[1],Q=function(e){var t=e.wallet,n=e.networkId,r=e.accountId,a=(0,_.default)(),c=(0,M.useNetwork)({networkId:n}).network,i=(0,M.useAccount)({networkId:n,accountId:r}).account,l=(0,y.useMemo)((function(){return P(a)}),[a]),d=(0,y.useState)([{title:a.formatMessage({id:"content__info"}),data:[l[o.Name]]}]),p=(0,s.default)(d,2),f=p[0],x=p[1];return(0,y.useEffect)((function(){var e=[];if(c&&t){var n=c.settings,r=n.exportCredentialInfo,d=n.privateKeyExportEnabled;n.publicKeyExportEnabled&&null!=i&&i.xpub&&e.push(o.ExportPublicKey),!d||"hd"!==t.type&&"imported"!==t.type||(r?k.forEach((function(t){var n=l[t];r.some((function(e){var t;return e.type===(null==(t=n.credentialInfo)?void 0:t.type)}))&&e.push(t)})):e.push(o.ExportPrivateKey)),"hw"===t.type&&e.push(o.HardwareCanNotExportPrivateKey),e.push(o.RemoveAccount);var s=a.formatMessage({id:"form__security_uppercase"}),p=Array.from(new Set(e.map((function(e){return l[e]}))));x((function(e){var t=e.filter((function(e){return e.title!==s}));return[].concat((0,u.default)(t),[{title:s,data:p}])}))}}),[c,t,a,l,null==i?void 0:i.xpub]),{dataSource:f}}({networkId:T,wallet:q,accountId:B}),X=Q.dataSource,Y=(0,y.useCallback)((function(){D&&V.getWallet(D).then((function(e){L(e)}))}),[V,D]),Z=(0,y.useCallback)((function(){B&&T&&V.getAccount(B,T).then((function(e){J(e)})).finally((function(){null==F||F()}))}),[B,V,T,F]);(0,y.useEffect)((function(){Y(),Z()}),[]);var $=(0,g.useWalletName)({wallet:q}),ee=(0,y.useCallback)((function(e){switch(e.key){case o.Name:return O(U),void C(!0);case o.ExportPrivateKey:case o.ExportPrivateSpendKey:case o.ExportPrivateViewKey:case o.ExportSecretMnemonic:return void(e.credentialInfo&&t.navigate(v.RootRoutes.Modal,{screen:v.ModalRoutes.ManagerAccount,params:{screen:v.ManagerAccountModalRoutes.ManagerAccountExportPrivateModal,params:{accountId:B,networkId:T,accountCredential:e.credentialInfo}}}));case o.ExportPublicKey:return void t.navigate(v.RootRoutes.Modal,{screen:v.ModalRoutes.ManagerAccount,params:{screen:v.ManagerAccountModalRoutes.ManagerAccountExportPublicModal,params:{walletId:D,accountId:B,networkId:T}}});case o.RemoveAccount:r({wallet:q,accountId:B,networkId:T,callback:function(){null==F||F(),null!=t&&null!=t.canGoBack&&t.canGoBack()&&t.goBack()}})}}),[U,B,D,r,t,T,F,q]),te=(0,y.useMemo)((function(){return{sections:X,renderSectionHeader:function(e){var t=e.section;return(0,I.jsx)(f.default,{typography:{sm:"Subheading",md:"Subheading"},color:"text-subdued",children:t.title})},renderItem:function(t){var n=t.item;return n.key===o.Name?(0,I.jsxs)(p.default,{onPress:function(){return ee(n)},mx:-2,my:1.5,alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(f.default,{typography:"Body1Strong",children:n.label}),(0,I.jsxs)(l.default,{alignItems:"center",flexDirection:"row",children:[(0,I.jsx)(f.default,{typography:"Body1Strong",color:"text-subdued",children:null==U?void 0:U.name}),(0,I.jsx)(d.default,{name:"ChevronRightMini",color:"icon-subdued",size:15})]})]}):[o.ExportPublicKey,o.ExportPrivateKey].concat((0,u.default)(k)).includes(n.key)?(0,I.jsx)(E,{item:n,onPress:function(){return ee(n)}}):n.key===o.HardwareCanNotExportPrivateKey?(0,I.jsx)(i.default,{title:e.formatMessage({id:"msg__for_the_security_of_your_assets_the_hardware_wallet_firmware_restricts_the_private_key_from_being_exported"}),dismiss:!1,alertType:"info",customIconName:"InformationCircleMini"}):n.key===o.RemoveAccount?(0,I.jsx)(p.default,{onPress:function(){return ee(n)},mx:-2,my:1.5,children:(0,I.jsx)(f.default,{typography:"Body1Strong",color:"text-critical",children:n.label})}):null},renderSectionFooter:function(){return(0,I.jsx)(l.default,{h:5})}}}),[X,U,e,ee]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.default,{header:null==U?void 0:U.name,headerDescription:$,footer:null,sectionListProps:te}),a,(0,I.jsx)(h.default,{visible:S,account:R,onClose:function(){return C(!1)},onDone:function(){Z()}})]})};var S=n(268883),C=n(321668),K=n(453028),A=n(669083),R=n(480058),O=n(795116),N=n(719392),D=n(225447),B=n(119804),T=n(497741),F=n(45668),V=function(e){var t=e.qrCodeContainerSize;return(0,I.jsxs)(R.default,{w:t,h:t,children:[(0,I.jsx)(D.default,{borderRadius:"24px",source:T,w:t,h:t}),(0,I.jsx)(O.default,{w:"100%",h:"100%",children:(0,I.jsx)(N.default,{})})]})},z=function(e){var t=e.privateOrPublicKey,n=e.qrCodeContainerSize,o=(0,_.default)(),r=(0,a.default)(),c=(0,y.useCallback)((function(){(0,B.copyToClipboard)(null!=t?t:""),A.default.show({title:o.formatMessage({id:"msg__copied"})})}),[t,o]);return(0,I.jsxs)(l.default,{py:"24px",justifyContent:"center",flexDirection:"column",children:[(0,I.jsx)(l.default,{minH:n,alignItems:"center",flexDirection:"column",children:t?(0,I.jsx)(l.default,{borderRadius:"24px",bgColor:"#FFFFFF",p:r?"16px":"11px",shadow:"depth.4",children:!!t&&(0,I.jsx)(K.default,{value:t,logo:F,size:r?264:186,logoSize:r?57:40,logoMargin:r?4:2,logoBackgroundColor:"white"})}):(0,I.jsx)(V,{qrCodeContainerSize:n})}),(0,I.jsxs)(l.default,{alignItems:"center",mt:r?"32px":"24px",px:r?"24px":"32px",children:[(0,I.jsx)(f.default,{color:"text-subdued",textAlign:"center",typography:{sm:"Body1",md:"Body2"},w:"full",maxW:"full",children:t}),(0,I.jsx)(C.default,{width:r?"188px":"154px",height:r?"48px":"36px",mt:r?"32px":"24px",type:"plain",size:r?"xl":"base",leftIconName:"Square2StackMini",onPress:c,isLoading:!t,children:o.formatMessage({id:"action__copy"})})]})]})},H=function(e){var t=e.accountId,n=e.networkId,o=e.password,r=e.credentialType,a=e.onAccountChange,c=m.default.engine,i=(0,y.useState)(),u=(0,s.default)(i,2),l=u[0],d=u[1];return(0,y.useEffect)((function(){t&&n&&o&&(c.getAccount(t,n).then((function(e){a(e)})),c.getAccountPrivateKey({accountId:t,credentialType:r,password:o}).then((function(e){d(e)})))}),[t,c,n,o]),(0,I.jsx)(z,{privateOrPublicKey:l,qrCodeContainerSize:{base:296,md:208}})};const q=function(){var e=(0,_.default)(),t=(0,x.useRoute)().params,n=t.accountId,o=t.networkId,r=t.accountCredential,a=(0,y.useState)(),i=(0,s.default)(a,2),u=i[0],l=i[1];return(0,I.jsx)(c.default,{footer:null,header:e.formatMessage({id:r.key}),headerDescription:null==u?void 0:u.name,height:"auto",children:(0,I.jsx)(S.default,{walletId:null,skipSavePassword:!0,field:S.ValidationFields.Secret,children:function(e){return(0,I.jsx)(H,{accountId:n,networkId:o,credentialType:r.type,password:e,onAccountChange:function(e){return l(e)}})}})})};var L=n(634795),W=n(493877),G=n(432986),U=function(e){var t=e.walletId,n=e.accountId,o=e.networkId,r=e.password,a=e.onAccountChange,c=m.default.engine,i=(0,y.useState)(),u=(0,s.default)(i,2),l=u[0],d=u[1],p=(0,W.default)();return(0,y.useEffect)((function(){(0,L.default)((function*(){try{if(!n||!o)return;var e=yield c.getAccount(n,o);a(e);var i=yield c.recomputeAccount({walletId:t,networkId:o,accountId:n,password:r,path:e.path,template:e.template,confirmOnDevice:!0});i&&d(i.xpub)}catch(u){G.deviceUtils.showErrorToast(u),null==p.goBack||p.goBack()}}))()}),[t,n,c,o,r]),(0,I.jsx)(z,{privateOrPublicKey:l,qrCodeContainerSize:{base:296,md:208}})};const J=function(){var e=(0,_.default)(),t=(0,x.useRoute)().params,n=t.accountId,o=t.networkId,r=t.walletId,a=(0,y.useState)(),i=(0,s.default)(a,2),u=i[0],l=i[1];return(0,I.jsx)(c.default,{footer:null,header:e.formatMessage({id:"title__export_public_key"}),headerDescription:null==u?void 0:u.name,height:"auto",children:(0,I.jsx)(S.default,{walletId:r,skipSavePassword:!0,field:S.ValidationFields.Secret,children:function(e){return(0,I.jsx)(U,{accountId:n,networkId:o,walletId:r,password:e,onAccountChange:function(e){return l(e)}})}})})};var Q=n(679978);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Y=(0,n(324665).default)(),Z=[{name:v.ManagerAccountModalRoutes.ManagerAccountModal,component:j},{name:v.ManagerAccountModalRoutes.ManagerAccountExportPrivateModal,component:q},{name:v.ManagerAccountModalRoutes.ManagerAccountExportPublicModal,component:J}];const $=function(){var e=(0,a.default)();return(0,I.jsx)(Y.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,Q.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:Z.map((function(e){return(0,I.jsx)(Y.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);