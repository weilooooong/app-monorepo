"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[37157],{317568:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(256666),a=n(317534),i=n(18861),o=n(10918),s=n(552322);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=e.name,n=e.address,r=e.amount,u=e.priorityAmount,l=e.notShowAddress,d=e.containerProps,f=void 0===d?{}:d,p=e.color,v=null,y=!1,m=!1;null!=t?v=t:null==n||l||(y=!0);var g=null;return u||y||!n||l?(null!=v||y)&&(g=null!=r?r:null):m=!0,(0,s.jsx)(i.default,c(c({alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},f),{},{children:!!(v||g||y||m)&&(0,s.jsxs)(i.default,{children:[!(!v&&!y)&&(y?(0,s.jsx)(a.default,{typography:"Body2Strong",text:n,short:!0,color:p||"text-default"}):(0,s.jsx)(o.default.Body2Strong,{color:p||"text-default",isTruncated:!0,children:v})),!(!g&&!m)&&(m?(0,s.jsx)(a.default,{color:p||"text-subdued",typography:"Body2",text:n,short:!0}):(0,s.jsx)(o.default.Body2,{color:p||"text-subdued",children:g}))]})}))};l.defaultProps={avatarSize:"md",hiddenAvatar:!1};const d=l},317534:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(256666),a=n(459740),i=n(866904),o=n(626015),s=n(552322),u=["text","short","prefix"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.text,n=e.short,r=e.prefix,c=(0,a.default)(e,u),d=t;return n&&(d=(0,o.shortenAddress)(d)),(0,s.jsxs)(i.default,l(l({},c),{},{children:[!!r&&r,d]}))};d.displayName="Address",d.defaultProps={short:!1};const f=d},637157:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Qt});var r=n(539144),a=n(877531),i=n(566147),o=n(470310),s=n(317568),u=n(18861),c=n(10918),l=n(634795),d=n(921311),f=n(311631),p=n(472719),v=n(783112),y=n(945821),m=n(859071),g=n(432986),h=n(324639),b=n(559656),P=n(97856),w=n(481047),O=n(530483),j=n(552322),A=function(){var e,t=(0,v.default)(),n=(0,p.useNavigation)(),r=(0,p.useRoute)().params,A=r.address,x=r.possibleNetworks,S=void 0===x?[]:x,E=(0,f.useSafeAreaInsets)().bottom,C=(0,d.default)({defaultValues:{network:S[0]}}),M=C.control,D=C.getValues,_=(0,m.useActiveWalletAccount)(),R=_.account,k=_.wallet;return(0,j.jsx)(a.default,{onPrimaryActionPress:(0,l.default)((function*(){var e=y.default.serviceNetwork;yield e.changeActiveNetwork(D("network"));var t=(0,P.getActiveWalletAccount)(),r=t.accountId,a=t.networkId;n.navigate(w.RootRoutes.Modal,{screen:w.ModalRoutes.Send,params:{screen:O.SendModalRoutes.PreSendToken,params:{accountId:r,networkId:a,from:"",to:A,amount:""}}})})),primaryActionTranslationId:"action__next",hideSecondaryAction:!0,header:t.formatMessage({id:"modal__preview"}),scrollViewProps:{pb:`${E}px`,children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.default,{borderColor:"border-subdued",borderWidth:"1px",borderRadius:"12px",borderStyle:"dashed",alignItems:"center",justifyContent:"center",p:"20px",mb:"32px",children:(0,j.jsx)(c.default.Body2,{textAlign:"center",wordBreak:"break-all",children:A})}),(0,j.jsxs)(i.default,{children:[(0,j.jsx)(h.default,{hideHelpText:!0,selectableNetworks:S,control:M,name:"network"}),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.default.Body2Strong,{mb:1,children:t.formatMessage({id:"form__account"})}),(0,j.jsxs)(o.default,{p:"15px",borderWidth:1,borderColor:"border-disabled",borderRadius:"12px",alignItems:"center",bg:"surface-disabled",children:[(0,j.jsx)(b.default,{walletImage:null==k?void 0:k.type,hwWalletType:(null==k?void 0:k.deviceType)||(0,g.getDeviceTypeByDeviceId)(null==k?void 0:k.associatedDevice),avatar:null==k?void 0:k.avatar,size:"sm",mr:"12px"}),(0,j.jsx)(s.default,{color:"text-disabled",hiddenAvatar:!0,address:null!=(e=null==R?void 0:R.address)?e:"",name:null==R?void 0:R.name})]})]})]})]})}})};A.displayName="PreviewSend";const x=A;var S=n(795116),E=n(321668),C=n(196234),M=n(202784),D=n(256666),_=n(887371),R=n(545754),k=n(411987),T=n(695058),N=n(370322),B=n(190769);function U(){return U=(0,l.default)((function*(){try{return yield function(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}({video:!0}),{status:N.PermissionStatus.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(t){var e=t.message;return"Permission dismissed"==={message:e}.message?{status:N.PermissionStatus.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:N.PermissionStatus.DENIED,expires:"never",canAskAgain:!0,granted:!1}}})),U.apply(this,arguments)}function I(){return(I=(0,l.default)((function*(){var e,t;if(null==(e=navigator)||null==(t=e.permissions)||!t.query)throw new N.UnavailabilityError("expo-barcode-scanner","navigator.permissions API is not available");switch((yield navigator.permissions.query({name:"camera"})).state){case"prompt":return{status:N.PermissionStatus.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:N.PermissionStatus.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:N.PermissionStatus.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}const q={get name(){return"ExpoBarCodeScannerModule"},get BarCodeType(){return{code39mod43:"code39mod43",code138:"code138",interleaved2of5:"interleaved2of5",aztec:"aztec",ean13:"ean13",ean8:"ean8",qr:"qr",pdf417:"pdf417",upc_e:"upc_e",datamatrix:"datamatrix",code39:"code39",code93:"code93",itf14:"itf14",codabar:"codabar",code128:"code128",upc_a:"upc_a"}},get Type(){return{front:"front",back:"back"}},requestPermissionsAsync:function(){var e=(0,l.default)((function*(){return function(){return U.apply(this,arguments)}()}));return function(){return e.apply(this,arguments)}}(),getPermissionsAsync:function(){var e=(0,l.default)((function*(){return function(){return I.apply(this,arguments)}()}));return function(){return e.apply(this,arguments)}}()};var F=n(489094),z=n(824931);function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.default)(e);if(t){var a=(0,T.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,k.default)(this,n)}}var L=function(e){(0,R.default)(n,e);var t=V(n);function n(){return t.apply(this,arguments)}return n.prototype.render=function(){return M.createElement(z.default,null,M.createElement(F.default,null,"BarCodeScanner Component not supported on the web"))},(0,_.default)(n)}(M.Component);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,D.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.default)(e);if(t){var a=(0,T.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,k.default)(this,n)}}var Q=q.BarCodeType,J=q.Type,K=function(e){(0,R.default)(n,e);var t=G(n);function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).lastEvents={},e.lastEventsTimes={},e.onObjectDetected=function(t){return function(n){var r=n.nativeEvent,a=r.type;e.lastEvents[a]&&e.lastEventsTimes[a]&&JSON.stringify(r)===e.lastEvents[a]&&Date.now()-e.lastEventsTimes[a]<500||t&&(t(r),e.lastEventsTimes[a]=new Date,e.lastEvents[a]=JSON.stringify(r))}},e}n.getPermissionsAsync=function(){var e=(0,l.default)((function*(){return q.getPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestPermissionsAsync=function(){var e=(0,l.default)((function*(){return q.requestPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.scanFromURLAsync=function(){var e=(0,l.default)((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.values(Q);if(!q.scanFromURLAsync)throw new N.UnavailabilityError("expo-barcode-scanner","scanFromURLAsync");if(Array.isArray(t)&&!t.length)throw new Error("No barCodeTypes specified; provide at least one barCodeType for scanner");if("ios"===B.default.OS){if(Array.isArray(t)&&!t.includes(Q.qr))throw new Error("Only QR type is supported by scanFromURLAsync() on iOS");return yield q.scanFromURLAsync(e,[Q.qr])}return yield q.scanFromURLAsync(e,t)}));return function(t){return e.apply(this,arguments)}}();var r=n.prototype;return r.render=function(){var e=this.convertNativeProps(this.props),t=this.props.onBarCodeScanned;return M.createElement(L,W(W({},e),{},{onBarCodeScanned:this.onObjectDetected(t)}))},r.convertNativeProps=function(e){var t={};for(var r of Object.entries(e)){var a=(0,C.default)(r,2),i=a[0],o=a[1];"string"===typeof o&&n.ConversionTables[i]?t[i]=n.ConversionTables[i][o]:t[i]=o}return t},(0,_.default)(n)}(M.Component);K.Constants={BarCodeType:Q,Type:J},K.ConversionTables={type:J},K.defaultProps={type:J.back,barCodeTypes:Object.values(Q)},K.usePermissions=(0,N.createPermissionHook)({getMethod:K.getPermissionsAsync,requestMethod:K.requestPermissionsAsync});K.Constants,K.getPermissionsAsync;var $,Y,X,Z,ee,te,ne,re,ae=K.requestPermissionsAsync,ie=(K.scanFromURLAsync,n(912576)),oe=n(119804),se=n(213208),ue=n(153894),ce=n(249831),le=n(249850),de=n(574393),fe=n(320713),pe=n(459740),ve=n(46486),ye=n(121133);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,D.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.front="front",e.back="back"}($||($={})),function(e){e.on="on",e.off="off",e.auto="auto",e.torch="torch"}(Y||(Y={})),function(e){e.on="on",e.off="off",e.auto="auto",e.singleShot="singleShot"}(X||(X={})),function(e){e.auto="auto",e.sunny="sunny",e.cloudy="cloudy",e.shadow="shadow",e.incandescent="incandescent",e.fluorescent="fluorescent",e.continuous="continuous",e.manual="manual"}(Z||(Z={})),function(e){e.png="png",e.jpg="jpg"}(ee||(ee={})),function(e){e.H264="avc1",e.HEVC="hvc1",e.JPEG="jpeg",e.AppleProRes422="apcn",e.AppleProRes4444="ap4h"}(te||(te={})),function(e){e.off="off",e.standard="standard",e.cinematic="cinematic",e.auto="auto"}(ne||(ne={})),function(e){e["2160p"]="2160p",e["1080p"]="1080p",e["720p"]="720p",e["480p"]="480p",e["4:3"]="4:3"}(re||(re={}));function he(){return(he=(0,l.default)((function*(e){var t=function(e){return{optional:[{sourceId:e}]}},n=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null},r=yield new Promise((function(e){return MediaStreamTrack.getSources((function(t){return e(t)}))})),a=null,i=null;r.forEach((function(e){"audio"===e.kind?a=e.id:"video"===e.kind&&(i=e.id)}));var o=n(e.audioConstraints);o&&(a=o);var s=n(e.videoConstraints);return s&&(i=s),[t(a),t(i)]}))).apply(this,arguments)}function be(e,t,n){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,l.default)((function*(e,t,n){var r={video:"undefined"===typeof n||n};return e||(r.audio="undefined"===typeof t||t),yield Oe(r)}))).apply(this,arguments)}function we(){return we=(0,l.default)((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(xe())return yield be(t,e.audio,e.video);var n=yield function(e){return he.apply(this,arguments)}(e),r=(0,C.default)(n,2),a=r[0],i=r[1];return yield be(t,a,i)})),we.apply(this,arguments)}function Oe(e){return je.apply(this,arguments)}function je(){return je=(0,l.default)((function*(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return yield function(e){return Ae.apply(this,arguments)}(ge(ge({},e),{},{video:t||e.video}))}catch(n){if(!t&&"ConstraintNotSatisfiedError"===n.name)return yield Oe(e,!0);throw n}})),je.apply(this,arguments)}function Ae(){return(Ae=(0,l.default)((function*(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;return new Promise((function(n,r){return t.call(navigator,e,n,r)}))}))).apply(this,arguments)}function xe(){return N.Platform.isDOMAvailable&&!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia)}function Se(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,l.default)((function*(e){return yield De(["front","user","facetime"],"user",e)}))).apply(this,arguments)}function Ce(e){return Me.apply(this,arguments)}function Me(){return(Me=(0,l.default)((function*(e){return yield De(["back","rear"],"environment",e)}))).apply(this,arguments)}function De(e,t,n){return _e.apply(this,arguments)}function _e(){return(_e=(0,l.default)((function*(e,t,n){if(!n){if(!navigator.mediaDevices.enumerateDevices)return null;n=yield navigator.mediaDevices.enumerateDevices()}var r=n.filter((function(e){return"videoinput"===e.kind})),a=r.filter((function(t){return e.some((function(e){return t.label.toLowerCase().includes(e)}))})),i=(0,C.default)(a,1)[0],o=r.filter((function(e){if(!("getCapabilities"in e))return null;var n=e.getCapabilities();return n.facingMode?n.facingMode.find((function(e){return t})):null})),s=(0,C.default)(o,1)[0];return(null==s?void 0:s.deviceId)||(null==i?void 0:i.deviceId)||null}))).apply(this,arguments)}function Re(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}function ke(e){return"Permission dismissed"===e.message?{status:N.PermissionStatus.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:N.PermissionStatus.DENIED,expires:"never",canAskAgain:!0,granted:!1}}function Te(){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,l.default)((function*(){try{return yield Re({video:!0}),{status:N.PermissionStatus.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return ke({message:e.message})}}))).apply(this,arguments)}function Be(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,l.default)((function*(e){var t,n;if(null==(t=navigator)||null==(n=t.permissions)||!n.query)throw new N.UnavailabilityError("expo-camera","navigator.permissions API is not available");switch((yield navigator.permissions.query({name:e})).state){case"prompt":return{status:N.PermissionStatus.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:N.PermissionStatus.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:N.PermissionStatus.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}const Ie={get name(){return"ExponentCameraManager"},get Type(){return{back:"back",front:"front"}},get FlashMode(){return{on:"on",off:"off",auto:"auto",torch:"torch"}},get AutoFocus(){return{on:"on",off:"off",auto:"auto",singleShot:"singleShot"}},get WhiteBalance(){return{auto:"auto",continuous:"continuous",manual:"manual"}},get VideoQuality(){return{}},get VideoStabilization(){return{}},isAvailableAsync:function(){var e=(0,l.default)((function*(){return xe()}));return function(){return e.apply(this,arguments)}}(),takePicture:function(){var e=(0,l.default)((function*(e,t){return yield t.takePicture(e)}));return function(t,n){return e.apply(this,arguments)}}(),pausePreview:function(){var e=(0,l.default)((function*(e){yield e.pausePreview()}));return function(t){return e.apply(this,arguments)}}(),resumePreview:function(){var e=(0,l.default)((function*(e){return yield e.resumePreview()}));return function(t){return e.apply(this,arguments)}}(),getAvailableCameraTypesAsync:function(){var e=(0,l.default)((function*(){if(!xe()||!navigator.mediaDevices.enumerateDevices)return[];var e=yield navigator.mediaDevices.enumerateDevices();return(yield Promise.all([(yield Se(e))&&$.front,(yield Ce())&&$.back])).filter(Boolean)}));return function(){return e.apply(this,arguments)}}(),getAvailablePictureSizes:function(){var e=(0,l.default)((function*(e,t){return yield t.getAvailablePictureSizes(e)}));return function(t,n){return e.apply(this,arguments)}}(),getPermissionsAsync:function(){var e=(0,l.default)((function*(){return Be("camera")}));return function(){return e.apply(this,arguments)}}(),requestPermissionsAsync:function(){var e=(0,l.default)((function*(){return Te()}));return function(){return e.apply(this,arguments)}}(),getCameraPermissionsAsync:function(){var e=(0,l.default)((function*(){return Be("camera")}));return function(){return e.apply(this,arguments)}}(),requestCameraPermissionsAsync:function(){var e=(0,l.default)((function*(){return Te()}));return function(){return e.apply(this,arguments)}}(),getMicrophonePermissionsAsync:function(){var e=(0,l.default)((function*(){return Be("microphone")}));return function(){return e.apply(this,arguments)}}(),requestMicrophonePermissionsAsync:function(){var e=(0,l.default)((function*(){try{return yield Re({audio:!0}),{status:N.PermissionStatus.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return ke({message:e.message})}}));return function(){return e.apply(this,arguments)}}()};var qe,Fe,ze=n(647677),Ve=n.n(ze);function Le(e){return"torch"===e}function He(e){switch(e){case"on":case"auto":return"continuous";case"off":return"none";case"singleShot":return"single-shot";default:return}}function We(e){switch(e){case"on":case"auto":return"continuous";case"off":return"manual";case"singleShot":return"single-shot";default:return}}var Ge=Object.keys({"3840x2160":3840/2160,"1920x1080":1920/1080,"1280x720":1280/720,"640x480":640/480,"352x288":352/288}),Qe=((qe={})[ee.jpg]="image/jpeg",qe[ee.png]="image/png",qe),Je={audio:!1,video:!0},Ke=((Fe={})[$.front]="user",Fe[$.back]="environment",Fe),$e={user:$.front,environment:$.back};var Ye=.92;function Xe(e,t){var n=t.scale,r=void 0===n?1:n,a=t.isImageMirror,i=void 0!==a&&a,o=function(e,t,n){var r=e*n;return{width:r,height:t/(e/r)}}(e.videoWidth,e.videoHeight,r),s=o.width,u=o.height,c=document.createElement("canvas");c.width=s,c.height=u;var l=c.getContext("2d",{alpha:!1});if(!l)throw new Error("Context is not defined");return i&&l.setTransform(-1,0,0,1,c.width,0),l.drawImage(e,0,0,s,u),c}function Ze(e,t){var n=function(e){var t={scale:1,imageType:ee.png,isImageMirror:!1};for(var n in e)n in e&&void 0!==e[n]&&n in t&&(t[n]=e[n]);return t}(t),r=Xe(e,n),a=n.imageType,i=n.quality;return function(e,t,n){Ve()(Object.values(ee).includes(t),`expo-camera: ${t} is not a valid ImageType. Expected a string from: ${Object.values(ee).join(", ")}`);var r=Qe[t];return t===ee.jpg?(Ve()(n<=1&&n>=0,`expo-camera: ${n} is not a valid image quality. Expected a number from 0...1`),e.toDataURL(r,n)):e.toDataURL(r)}(r,a,void 0===i?Ye:i)}function et(e,t,n){var r={audio:!1,video:{}};if(function(e,t,n){return void 0!==e&&void 0!==t&&void 0!==n}(e,t,n))return Je;var a,i=navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():null;if(!i||!i.facingMode||!i.width||!i.height)return Je;if(e&&Object.values($).includes(e)){var o=Ke[e];if(/WebKit/.test(navigator.userAgent)&&!/Edg/.test(navigator.userAgent)){var s,u="user"===o?"exact":"ideal";r.video.facingMode=((s={})[u]=o,s)}else r.video.facingMode={ideal:Ke[e]}}return(a=r.video)&&"boolean"!==typeof a.video&&(r.video.width=t,r.video.height=n),r}function tt(){return(tt=(0,l.default)((function*(e,t,n){try{return yield nt(e,t,n)}catch(a){if(a instanceof OverconstrainedError&&"facingMode"===a.constraint){var r=e===$.back?$.front:$.back;return yield nt(r,t,n)}throw a}}))).apply(this,arguments)}function nt(e,t,n){return rt.apply(this,arguments)}function rt(){return rt=(0,l.default)((function*(e,t,n){var r=et(e,t,n),a=yield function(e){return we.apply(this,arguments)}(r);return a})),rt.apply(this,arguments)}function at(e,t){return it.apply(this,arguments)}function it(){return it=(0,l.default)((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&t.getVideoTracks&&(yield Promise.all(t.getVideoTracks().map((function(t){return function(e,t){return ot.apply(this,arguments)}(e,t,n)}))))})),it.apply(this,arguments)}function ot(){return ot=(0,l.default)((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.getCapabilities(),a={};for(var i of["exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","zoom"])r[i]&&(a[i]=ct(r[i],n[i]));function o(t,a,i){return function(e){var t=e.constraintKey,n=e.settingsKey,r=e.convertedSetting,a=e.capabilities,i=e.settings;e.cameraType,i[n];if(Array.isArray(a[t])&&r&&!a[t].includes(r))return void 0;return r}({constraintKey:t,settingsKey:a,convertedSetting:i(n[a]),capabilities:r,settings:n,cameraType:e})}r.focusMode&&void 0!==n.autoFocus&&(a.focusMode=o("focusMode","autoFocus",We)),r.torch&&void 0!==n.flashMode&&(a.torch=o("torch","flashMode",Le)),r.whiteBalanceMode&&void 0!==n.whiteBalance&&(a.whiteBalanceMode=o("whiteBalanceMode","whiteBalance",He));try{yield t.applyConstraints({advanced:[a]})}catch(s){0}})),ot.apply(this,arguments)}function st(e){e&&(e.getAudioTracks&&e.getAudioTracks().forEach((function(e){return e.stop()})),e.getVideoTracks&&e.getVideoTracks().forEach((function(e){return e.stop()})),"function"===typeof e.stop&&e.stop())}function ut(e,t){var n,r=null!=(n=window.URL.createObjectURL)?n:window.webkitURL.createObjectURL;if("undefined"!==typeof e.srcObject?e.srcObject=t:"undefined"!==typeof e.mozSrcObject?e.mozSrcObject=t:t&&r&&(e.src=r(t)),!t){var a,i,o,s=null!=(a=window.URL.revokeObjectURL)?a:window.webkitURL.revokeObjectURL,u=null!=(i=null!=(o=e.src)?o:e.srcObject)?i:e.mozSrcObject;s&&"string"===typeof u&&s(u)}}function ct(e,t){if(t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1];return(e-n[0])*(t[1]-t[0])/(n[1]-n[0])+t[0]}(t,[e.min,e.max]);return Math.min(e.max,Math.max(e.min,n))}}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,D.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=["autoFocus","flashMode","exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","whiteBalance","zoom"];function pt(e,t,n,r){var a=r.onCameraReady,i=r.onMountError,o=M.useRef(!1),s=M.useRef([]),u=M.useRef({autoFocus:"continuous",flashMode:"off",whiteBalance:"continuous",zoom:1}),c=M.useState(null),d=(0,C.default)(c,2),f=d[0],p=d[1],v=M.useMemo((function(){return f?f.getTracks()[0].getSettings():null}),[f]),y=M.useMemo((function(){if(!v)return null;var e=v.facingMode;return $e[void 0===e?"user":e]}),[v]),m=M.useCallback((0,l.default)((function*(){try{return yield function(e,t,n){return tt.apply(this,arguments)}(t)}catch(e){return i&&i({nativeEvent:e}),null}})),[t,i]),g=M.useCallback((0,l.default)((function*(){var e=yield m();return function(e,t){if(!e||!t)return!1;var n=e.getTracks()[0].getSettings(),r=t.getTracks()[0].getSettings();return n.deviceId===r.deviceId}(e,f)||(s.current.some((function(t){return t.id===(null==e?void 0:e.id)}))||s.current.push(e),p(e),a&&a()),!1})),[m,p,a,f,s.current]);return M.useEffect((function(){o.current||(o.current=!0,g().then((function(e){o.current=e})).catch((function(){o.current=!1})))}),[t]),M.useEffect((function(){var e={};for(var r of Object.keys(n))if(ft.includes(r)){var a=n[r];a!==u.current[r]&&(e[r]=a)}var i=!!Object.keys(e).length,o=dt(dt({},u.current),e);i&&at(t,f,e),u.current=o}),[n.autoFocus,n.flashMode,n.exposureCompensation,n.colorTemperature,n.iso,n.brightness,n.contrast,n.saturation,n.sharpness,n.focusDistance,n.whiteBalance,n.zoom]),M.useEffect((function(){e.current&&ut(e.current,f)}),[e.current,f]),M.useEffect((function(){return function(){for(var t of s.current)st(t);e.current&&ut(e.current,f)}}),[]),function(e,t){M.useEffect((function(){e&&e.addEventListener("loadedmetadata",(function(){requestAnimationFrame((function(){t()}))}))}),[e])}(e.current,(function(){at(t,f,u.current)})),{type:y,mediaTrackSettings:v}}var vt=n(125631);function yt(e,t){var n=t.isEnabled,r=t.captureOptions,a=t.interval,i=t.onScanned,o=t.onError,s=M.useRef(!1),u=M.useRef(void 0);function c(){return d.apply(this,arguments)}function d(){return d=(0,l.default)((function*(){if(s.current&&i)try{var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e.readyState!==e.HAVE_ENOUGH_DATA)return null;var n=Xe(e,t),r=n.getContext("2d",{alpha:!1});return r&&n.width&&n.height?r.getImageData(0,0,n.width,n.height):null}(e.current,r),n=yield(0,vt.scanImageData)(t),l=(0,C.default)(n,1)[0];l&&i({nativeEvent:{type:l.typeName,data:l.decode(),cornerPoints:l.points}})}catch(p){o&&o({nativeEvent:p})}finally{if(0===a)return void f();var d=!a||a<0?16:a;u.current=setTimeout((function(){c()}),d)}else f()})),d.apply(this,arguments)}function f(){s.current=!1,clearTimeout(u.current)}M.useEffect((function(){n?(s.current=!0,c()):f()}),[n]),M.useEffect((function(){return function(){f()}}),[])}var mt=["type","pictureSize","poster"];function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,D.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const bt=M.forwardRef((function(e,t){var n,r,a=e.type,i=(e.pictureSize,e.poster),o=(0,pe.default)(e,mt),s=M.useRef(null),u=pt(s,a,o,{onCameraReady:function(){o.onCameraReady&&o.onCameraReady()},onMountError:o.onMountError}),c=M.useMemo((function(){var e,t;return!(null==(e=o.barCodeScannerSettings)||null==(t=e.barCodeTypes)||!t.includes("qr")||!o.onBarCodeScanned)}),[null==(n=o.barCodeScannerSettings)?void 0:n.barCodeTypes,o.onBarCodeScanned]);yt(s,{interval:null==(r=o.barCodeScannerSettings)?void 0:r.interval,isEnabled:c,captureOptions:{scale:1,isImageMirror:u.type===$.front},onScanned:function(e){o.onBarCodeScanned&&o.onBarCodeScanned(e)}}),M.useImperativeHandle(t,(function(){return{getAvailablePictureSizes:function(){var e=(0,l.default)((function*(e){return Ge}));return function(t){return e.apply(this,arguments)}}(),takePicture:function(){var e=(0,l.default)((function*(e){var t,n;if(!s.current||(null==(t=s.current)?void 0:t.readyState)!==(null==(n=s.current)?void 0:n.HAVE_ENOUGH_DATA))throw new N.CodedError("ERR_CAMERA_NOT_READY","HTMLVideoElement does not have enough camera data to construct an image yet.");var r=u.mediaTrackSettings;if(!r)throw new N.CodedError("ERR_CAMERA_NOT_READY","MediaStream is not ready yet.");return function(e,t,n){var r=Ze(e,n),a={uri:r,base64:r,width:0,height:0};if(t){var i=t.width,o=void 0===i?0:i,s=t.height,u=void 0===s?0:s;a.width=o,a.height=u,a.exif=t}return n.onPictureSaved&&n.onPictureSaved(a),a}(s.current,r,ht(ht({},e),{},{onPictureSaved:function(t){e.onPictureSaved&&e.onPictureSaved(t),o.onPictureSaved&&o.onPictureSaved({nativeEvent:{data:t,id:-1}})}}))}));return function(t){return e.apply(this,arguments)}}(),resumePreview:function(){var e=(0,l.default)((function*(){s.current&&s.current.play()}));return function(){return e.apply(this,arguments)}}(),pausePreview:function(){var e=(0,l.default)((function*(){s.current&&s.current.pause()}));return function(){return e.apply(this,arguments)}}()}}),[u.mediaTrackSettings,o.onPictureSaved]);var d=M.useMemo((function(){var e=u.type===Ie.Type.front;return[ve.default.absoluteFill,wt.video,{transform:e?[{scaleX:-1}]:void 0}]}),[u.type]);return M.createElement(z.default,{pointerEvents:"box-none",style:[wt.videoWrapper,o.style]},M.createElement(Pt,{autoPlay:!0,playsInline:!0,muted:!0,poster:i,pointerEvents:o.pointerEvents,ref:s,style:d}),o.children)}));var Pt=M.forwardRef((function(e,t){return(0,ye.default)("video",ht(ht({},e),{},{ref:t}))})),wt=ve.default.create({videoWrapper:{flex:1,alignItems:"stretch"},video:{width:"100%",height:"100%",objectFit:"cover"}}),Ot={type:Ie.Type,flashMode:Ie.FlashMode,autoFocus:Ie.AutoFocus,whiteBalance:Ie.WhiteBalance};function jt(e){var t=function(e){if(!e||"object"!==typeof e)return{};var t={};for(var n of Object.entries(e)){var r=(0,C.default)(n,2),a=r[0],i=r[1];"string"===typeof i&&Ot[a]?t[a]=Ot[a][i]:t[a]=i}return t}(e);return t.onBarCodeScanned&&(t.barCodeScannerEnabled=!0),t.onFacesDetected&&(t.faceDetectorEnabled=!0),"android"!==N.Platform.OS&&(delete t.ratio,delete t.useCamera2Api),"web"!==N.Platform.OS&&delete t.poster,t}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){(0,D.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.default)(e);if(t){var a=(0,T.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,k.default)(this,n)}}var Et={},Ct=1;function Mt(e){var t=e||{};return t&&"object"===typeof t?"string"===typeof t.quality&&(t.quality=_t.Constants.VideoQuality[t.quality]):t={},t}function Dt(e){var t=e.nativeEvent,n=t.id,r=t.data,a=Et[n];a&&(a(r),delete Et[n])}var _t=function(e){(0,R.default)(n,e);var t=St(n);function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._lastEvents={},e._lastEventsTimes={},e._onCameraReady=function(){e.props.onCameraReady&&e.props.onCameraReady()},e._onMountError=function(t){var n=t.nativeEvent;e.props.onMountError&&e.props.onMountError(n)},e._onObjectDetected=function(t){return function(n){var r=n.nativeEvent,a=r.type;e._lastEvents[a]&&e._lastEventsTimes[a]&&JSON.stringify(r)===e._lastEvents[a]&&(new Date).getTime()-e._lastEventsTimes[a].getTime()<500||t&&(t(r),e._lastEventsTimes[a]=new Date,e._lastEvents[a]=JSON.stringify(r))}},e._setReference=function(t){t?(e._cameraRef=t,"web"===N.Platform.OS?e._cameraHandle=t:e._cameraHandle=(0,fe.default)(t)):(e._cameraRef=null,e._cameraHandle=null)},e}n.isAvailableAsync=function(){var e=(0,l.default)((function*(){if(!Ie.isAvailableAsync)throw new N.UnavailabilityError("expo-camera","isAvailableAsync");return yield Ie.isAvailableAsync()}));return function(){return e.apply(this,arguments)}}(),n.getAvailableCameraTypesAsync=function(){var e=(0,l.default)((function*(){if(!Ie.getAvailableCameraTypesAsync)throw new N.UnavailabilityError("expo-camera","getAvailableCameraTypesAsync");return yield Ie.getAvailableCameraTypesAsync()}));return function(){return e.apply(this,arguments)}}(),n.getAvailableVideoCodecsAsync=function(){var e=(0,l.default)((function*(){if(!Ie.getAvailableVideoCodecsAsync)throw new N.UnavailabilityError("Camera","getAvailableVideoCodecsAsync");return yield Ie.getAvailableVideoCodecsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getPermissionsAsync=function(){var e=(0,l.default)((function*(){return console.warn('"getPermissionsAsync()" is now deprecated. Please use "getCameraPermissionsAsync()" or "getMicrophonePermissionsAsync()" instead.'),Ie.getPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestPermissionsAsync=function(){var e=(0,l.default)((function*(){return console.warn('"requestPermissionsAsync()" is now deprecated. Please use "requestCameraPermissionsAsync()" or "requestMicrophonePermissionsAsync()" instead.'),Ie.requestPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getCameraPermissionsAsync=function(){var e=(0,l.default)((function*(){return Ie.getCameraPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestCameraPermissionsAsync=function(){var e=(0,l.default)((function*(){return Ie.requestCameraPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getMicrophonePermissionsAsync=function(){var e=(0,l.default)((function*(){return Ie.getMicrophonePermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestMicrophonePermissionsAsync=function(){var e=(0,l.default)((function*(){return Ie.requestMicrophonePermissionsAsync()}));return function(){return e.apply(this,arguments)}}();var r=n.prototype;return r.takePictureAsync=function(){var e=(0,l.default)((function*(e){var t=function(e){var t=e&&"object"===typeof e?e:{};if(t.quality||(t.quality=1),t.onPictureSaved){var n=Ct++;Et[n]=t.onPictureSaved,t.id=n,t.fastMode=!0}return t}(e);return yield Ie.takePicture(t,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.getSupportedRatiosAsync=function(){var e=(0,l.default)((function*(){if(!Ie.getSupportedRatios)throw new N.UnavailabilityError("Camera","getSupportedRatiosAsync");return yield Ie.getSupportedRatios(this._cameraHandle)}));return function(){return e.apply(this,arguments)}}(),r.getAvailablePictureSizesAsync=function(){var e=(0,l.default)((function*(e){if(!Ie.getAvailablePictureSizes)throw new N.UnavailabilityError("Camera","getAvailablePictureSizesAsync");return yield Ie.getAvailablePictureSizes(e,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.recordAsync=function(){var e=(0,l.default)((function*(e){if(!Ie.record)throw new N.UnavailabilityError("Camera","recordAsync");var t=Mt(e);return yield Ie.record(t,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.stopRecording=function(){if(!Ie.stopRecording)throw new N.UnavailabilityError("Camera","stopRecording");Ie.stopRecording(this._cameraHandle)},r.pausePreview=function(){if(!Ie.pausePreview)throw new N.UnavailabilityError("Camera","pausePreview");Ie.pausePreview(this._cameraHandle)},r.resumePreview=function(){if(!Ie.resumePreview)throw new N.UnavailabilityError("Camera","resumePreview");Ie.resumePreview(this._cameraHandle)},r.render=function(){var e=jt(this.props),t=this.props.onBarCodeScanned?this._onObjectDetected(this.props.onBarCodeScanned):void 0,n=this._onObjectDetected(this.props.onFacesDetected);return M.createElement(bt,xt(xt({},e),{},{ref:this._setReference,onCameraReady:this._onCameraReady,onMountError:this._onMountError,onBarCodeScanned:t,onFacesDetected:n,onPictureSaved:Dt}))},(0,_.default)(n)}(M.Component);_t.Constants={Type:Ie.Type,FlashMode:Ie.FlashMode,AutoFocus:Ie.AutoFocus,WhiteBalance:Ie.WhiteBalance,VideoQuality:Ie.VideoQuality,VideoStabilization:Ie.VideoStabilization||{},VideoCodec:Ie.VideoCodec},_t.ConversionTables=Ot,_t.defaultProps={zoom:0,ratio:"4:3",focusDepth:0,faceDetectorSettings:{},type:Ie.Type.back,autoFocus:Ie.AutoFocus.on,flashMode:Ie.FlashMode.off,whiteBalance:Ie.WhiteBalance.auto},_t.useCameraPermissions=(0,N.createPermissionHook)({getMethod:_t.getCameraPermissionsAsync,requestMethod:_t.requestCameraPermissionsAsync}),_t.useMicrophonePermissions=(0,N.createPermissionHook)({getMethod:_t.getMicrophonePermissionsAsync,requestMethod:_t.requestMicrophonePermissionsAsync});_t.Constants,_t.getPermissionsAsync,_t.requestPermissionsAsync,_t.getCameraPermissionsAsync,_t.requestCameraPermissionsAsync,_t.getMicrophonePermissionsAsync,_t.requestMicrophonePermissionsAsync;var Rt=function(e){var t=e.style,n=e.isActive,r=e.children,a=e.onQrcodeScanned;return n?(0,j.jsx)(_t,{style:t,onBarCodeScanned:function(e){var t=e.data;return a(t)},barCodeScannerSettings:{barCodeTypes:[K.Constants.BarCodeType.qr]},children:r}):null};Rt.displayName="ScanCamera";const kt=Rt;var Tt=n(394171),Nt=n(393072),Bt=function(){var e,t=(0,v.default)(),n=(0,f.useSafeAreaInsets)().bottom,i=(0,M.useState)(N.PermissionStatus.UNDETERMINED),s=(0,C.default)(i,2),c=s[0],d=s[1],y=(0,M.useRef)(!1),m=(0,p.useIsFocused)(),g=(0,r.default)(),h=(0,p.useNavigation)(),b=null==(e=(0,p.useRoute)().params)?void 0:e.onScanCompleted,P=(0,M.useCallback)((function(e){if(!y.current&&e){if(y.current=!0,b)return b(e),void h.goBack();var t=(0,ce.handleScanResult)(e);if(t){if(t.type===Nt.ScanSubResultCategory.MIGRATE)return h.goBack(),void setTimeout((function(){(0,le.showMigrateDataModal)({serverAddress:e.replace(de.OneKeyMigrateQRCodePrefix,"")})}),150);h.replace(Nt.ScanQrcodeRoutes.ScanQrcodeResult,t)}else h.goBack()}}),[h,b]),w=(0,M.useCallback)((0,l.default)((function*(){var e=yield(0,ie.launchImageLibraryAsync)({base64:!0,allowsMultipleSelection:!1});if(!e.canceled){var t=yield(0,Tt.scanFromURLAsync)(e.assets[0].uri);t&&P(t)}})),[P]),O=(0,M.useCallback)((0,l.default)((function*(){P(yield(0,oe.getClipboard)())})),[P]);return(0,M.useEffect)((function(){ae().then((function(e){var t=e.status;return d(t)}))}),[]),(0,M.useEffect)((function(){m&&(y.current=!1)}),[m]),c===N.PermissionStatus.GRANTED?(0,j.jsx)(a.default,{hidePrimaryAction:!0,hideSecondaryAction:!0,header:t.formatMessage({id:"title__scan_qr_code"}),headerDescription:se.default.isNativeIOSPhone?(0,j.jsx)(u.default,{h:"8px"}):void 0,height:"535px",footer:(0,j.jsxs)(o.default,{mb:n,py:"16px",px:g?"16px":"24px",space:"12px",justifyContent:"center",children:[(0,j.jsx)(E.default,{flexGrow:g?1:void 0,size:g?"xl":"base",onPress:w,leftIconName:"PhotoMini",children:t.formatMessage({id:"action__choose_an_image"})}),se.default.canGetClipboard?(0,j.jsx)(E.default,{flexGrow:g?1:void 0,size:g?"xl":"base",leftIconName:"ClipboardMini",onPress:O,children:t.formatMessage({id:"action__paste"})}):null]}),staticChildrenProps:{flex:1},children:(0,j.jsx)(kt,{style:{flex:1},isActive:m,onQrcodeScanned:P,children:(0,j.jsx)(S.default,{position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden",children:(0,j.jsx)(u.default,{borderWidth:400,borderColor:"rgba(0,0,0,.5)",borderRadius:"425px",children:(0,j.jsx)(u.default,{size:"256px",borderWidth:4,borderColor:"white",borderRadius:"24px"})})})})}):c===N.PermissionStatus.DENIED?(0,j.jsx)(ue.default,{type:"camera"}):null};Bt.displayName="ScanQrcode";const Ut=Bt;var It=n(669083),qt=n(903730),Ft=n(526002),zt=n(331639);function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Lt=function(e){var t=e.data,n=(0,p.useNavigation)(),r=(0,M.useMemo)((function(){return[{id:"form__add_to_address_book",onPress:function(){n.navigate(w.RootRoutes.Modal,{screen:w.ModalRoutes.AddressBook,params:{screen:qt.AddressBookRoutes.NewAddressRoute,params:{address:t}}})},icon:"UserPlusOutline"},{id:"form__imported_as_a_watch_account",onPress:function(){n.replace(w.RootRoutes.Onboarding,{screen:Ft.EOnboardingRoutes.RecoveryWallet,params:{mode:"watching",presetText:t}})},icon:"EyeOutline"}]}),[t,n]);return(0,j.jsx)(zt.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){(0,D.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({options:r},e))};const Ht=function(){var e=(0,v.default)(),t=(0,f.useSafeAreaInsets)().bottom,n=(0,r.default)(),i=(0,p.useRoute)().params,s=i.data,l=i.hideMoreMenu,d=(0,M.useCallback)((function(){(0,oe.copyToClipboard)(s),It.default.show({title:e.formatMessage({id:"msg__copied"})})}),[s,e]);return(0,j.jsx)(a.default,{size:n?void 0:"lg",height:"516px",header:e.formatMessage({id:"content__info"}),footer:(0,j.jsx)(u.default,{borderTopColor:"divider",pb:`${t}px`,borderTopWidth:ve.default.hairlineWidth,children:(0,j.jsxs)(o.default,{justifyContent:"flex-end",py:"4",px:n?4:6,alignItems:"center",space:4,children:[(0,j.jsx)(E.default,{size:n?"xl":"base",onPress:d,leftIconName:"Square2StackOutline",flex:n?1:void 0,children:e.formatMessage({id:"action__copy"})}),l?null:(0,j.jsx)(Lt,{data:s,placement:"top left",width:"280px",children:(0,j.jsx)(E.default,{size:n?"xl":"base",leftIconName:"EllipsisVerticalOutline",flex:n?1:void 0,children:e.formatMessage({id:"action__more _options"})})})]})}),scrollViewProps:{pb:`${t}px`,children:(0,j.jsx)(c.default.Display2XLarge,{wordBreak:"break-all",children:s})}})};var Wt=(0,n(324665).default)(),Gt=[{name:Nt.ScanQrcodeRoutes.ScanQrcode,component:Ut},{name:Nt.ScanQrcodeRoutes.ScanQrcodeResult,component:Ht},{name:Nt.ScanQrcodeRoutes.PreviewSend,component:x}];const Qt=function(){var e=(0,r.default)();return(0,j.jsx)(Wt.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:Gt.map((function(e){return(0,j.jsx)(Wt.Screen,{name:e.name,component:e.component},e.name)}))})}},249850:(e,t,n)=>{n.r(t),n.d(t,{showMigrateDataModal:()=>F});var r,a=n(256666),i=n(259825),o=n(321668),s=n(259924),u=n(795116),c=n(433996),l=n(854787),d=n(435581),f=n(510374),p=n(18861),v=n(866904),y=n(719392),m=n(669083),g=n(634795),h=n(545455),b=n.n(h),P=n(196234),w=n(202784),O=n(472719),j=n(553197),A=n(783112),x=n(46486),S=n(707379),E=n(153894),C=n(481047),M=n(213208),D=n(945821),_=n(793525),R=n(526002),k=n(574393),T=n(91516),N=n(552322);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.Success=0]="Success",e[e.Fail=1]="Fail",e[e.Connecting=2]="Connecting"}(r||(r={}));var I=(0,k.deviceInfo)(),q=function(e){var t=e.serverAddress,n=e.serverInfo,a=e.closeOverlay,h=D.default.serviceMigrate,B=(0,w.useRef)(n),U=(0,w.useState)((function(){return n?r.Success:r.Connecting})),q=(0,P.default)(U,2),F=q[0],z=q[1],V=(0,w.useState)(I),L=(0,P.default)(V,2),H=L[0],W=L[1],G=(0,w.useState)(B.current),Q=(0,P.default)(G,2),J=Q[0],K=Q[1],$=(0,w.useMemo)((function(){return(0,k.parseDeviceInfo)(H)}),[H]),Y=(0,w.useMemo)((function(){if(J)return(0,k.parseDeviceInfo)(J)}),[J]),X=(0,w.useState)(!0),Z=(0,P.default)(X,2),ee=Z[0],te=Z[1],ne=(0,A.default)(),re=(0,T.useExportData)().exportDataRequest,ae=(0,O.useNavigation)();(0,w.useEffect)((function(){F===r.Connecting&&setTimeout((function(){h.connectServer(t).then((function(e){e?"string"===typeof e?("ERR_NETWORK"===e&&M.default.isNativeIOS&&(0,_.showDialog)((0,N.jsx)(E.default,{type:"localNetwork"})),z(r.Fail)):(B.current=e,K(e),z(r.Success)):z(r.Fail)}))}),500)}),[F,t,h]),(0,w.useEffect)((function(){F===r.Success&&void 0!==B.current&&(ee?(W(I),K(B.current)):(W(B.current),K(I)))}),[F,H,ee,J]);var ie=(0,w.useCallback)((0,g.default)((function*(){var e=yield re(),n=e.status,r=e.data;if(n===T.ExportResult.SUCCESS){var a=yield h.sendDataToServer({ipAddress:t,data:JSON.stringify(r)});return a&&Y?m.default.show({title:`\ud83e\uddd9 ${ne.formatMessage({id:"msg__data_sent_to_platform"},{platform:Y.name})}`}):m.default.show({title:ne.formatMessage({id:"form__failed"})},{type:"error"}),a}return n===T.ExportResult.EMPTY&&m.default.show({title:ne.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1})),[re,ne,Y,t,h]),oe=(0,w.useCallback)((0,g.default)((function*(){var e=yield h.getDataFromServer({ipAddress:t});return!!e&&("number"===typeof e?void(e===S.MigrateErrorCode.ConnectFail&&z(r.Fail)):function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=(0,P.default)(e,2),r=(n[0],n[1]);b()(r)||(t=!1)})),t}(JSON.parse(e.public))?(m.default.show({title:ne.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1):(h.disConnectServer(t),a(),ae.navigate(C.RootRoutes.Onboarding,{screen:R.EOnboardingRoutes.MigrationPreview,params:{data:e}}),!0))})),[a,ne,ae,t,h]),se=(0,w.useState)(!1),ue=(0,P.default)(se,2),ce=ue[0],le=ue[1],de=(0,w.useCallback)((0,g.default)((function*(){le(!0),ee?(yield ie(),h.disConnectServer(t),a()):yield oe(),le(!1)})),[a,oe,ee,ie,t,h]),fe=(0,w.useMemo)((function(){return F===r.Connecting?(0,N.jsx)(f.default,{title:"",subTitle:(0,N.jsxs)(p.default,{children:[(0,N.jsx)(y.default,{size:"lg"}),(0,N.jsx)(v.default,{mt:"12px",typography:"DisplayMedium",children:ne.formatMessage({id:"content__connecting"})})]})}):F===r.Fail?(0,N.jsx)(f.default,{emoji:"\ud83d\udeab",title:ne.formatMessage({id:"modal__failed_to_connect"}),subTitle:ne.formatMessage({id:"modal__migrating_data_connection_failed_desc"})}):F===r.Success&&Y&&$?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(p.default,{bgColor:"surface-default",borderRadius:"12px",borderColor:"border-subdued",borderWidth:x.default.hairlineWidth,children:[(0,N.jsxs)(p.default,{py:"16px",children:[(0,N.jsx)(v.default,{typography:"Body2",color:"text-subdued",ml:"16px",children:ne.formatMessage({id:"content__from"})}),(0,N.jsxs)(p.default,{paddingX:"16px",flexDirection:"row",mt:"12px",children:[(0,N.jsx)(d.default,{name:$.logo,size:24,color:"icon-subdued"}),(0,N.jsx)(v.default,{typography:"Body1Strong",flex:1,ml:"8px",children:$.name}),ee&&(0,N.jsx)(j.View,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:(0,N.jsx)(l.default,{size:"sm",type:"info",title:ne.formatMessage({id:"content__current"})})})]})]}),(0,N.jsx)(p.default,{borderBottomWidth:x.default.hairlineWidth,borderColor:"border-subdued"}),(0,N.jsxs)(p.default,{py:"16px",children:[(0,N.jsx)(v.default,{typography:"Body2",color:"text-subdued",ml:"16px",children:ne.formatMessage({id:"content__to"})}),(0,N.jsxs)(p.default,{paddingX:"16px",flexDirection:"row",justifyContent:"space-between",mt:"12px",children:[(0,N.jsx)(d.default,{name:Y.logo,size:24,color:"icon-subdued"}),(0,N.jsx)(v.default,{typography:"Body1Strong",flex:1,ml:"8px",children:Y.name}),!ee&&(0,N.jsx)(j.View,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:(0,N.jsx)(l.default,{size:"sm",type:"info",title:ne.formatMessage({id:"content__current"})})})]})]}),(0,N.jsx)(u.default,{position:"absolute",width:"full",height:"full",children:(0,N.jsx)(c.default,{onPress:function(){te((function(e){return!e}))},name:"SwitchVerticalOutline",circle:!0,type:"basic",size:"base",iconColor:"icon-default"})})]}),(0,N.jsxs)(p.default,{mt:"24px",children:[ce&&!ee&&(0,N.jsx)(s.default,{customIconName:"EllipsisHorizontalCircleMini",title:ne.formatMessage({id:"modal__migrating_data_awaiting_confirmation"},{from:$.name}),alertType:"success",dismiss:!1}),(0,N.jsx)(o.default,{mt:"12px",size:"xl",type:"primary",onPress:de,isLoading:ce,children:ne.formatMessage({id:"action__migrate"})})]})]}):void 0}),[F,ne,ce,ee,de,$,Y]);return(0,N.jsx)(i.default,{title:ne.formatMessage({id:"modal__migrating_data"}),headerDescription:F===r.Success?(0,N.jsxs)(v.default,{typography:"Caption",color:"text-success",children:["\ud83c\udf89 ",ne.formatMessage({id:"modal__migrating_data_desc"})]}):null,closeOverlay:function(){h.disConnectServer(t),a()},children:fe})},F=function(e){return(0,_.showOverlay)((function(t){return(0,N.jsx)(q,U(U({},e),{},{closeOverlay:t}))}))}},91516:(e,t,n)=>{n.r(t),n.d(t,{ExportResult:()=>r,useExportData:()=>f});var r,a=n(634795),i=n(545455),o=n.n(i),s=n(196234),u=n(202784),c=n(945821),l=n(268883),d=n(327226);function f(){var e=(0,d.default)().showVerify,t=c.default.serviceCloudBackup,n=(0,u.useCallback)(function(){var e=(0,a.default)((function*(e){var n=yield t.getDataForBackup(e);return{status:r.SUCCESS,data:n}}));return function(t){return e.apply(this,arguments)}}(),[t]);return{exportDataRequest:(0,u.useCallback)((0,a.default)((function*(){return new Promise((function(a){t.getDataForBackup("").then((function(t){!function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=(0,s.default)(e,2),r=(n[0],n[1]);o()(r)||(t=!1)})),t}(JSON.parse(t.publicData))?e((function(e){n(e).then((function(e){a(e)}))}),(function(){a({status:r.CANCEL})}),null,l.ValidationFields.Secret):a({status:r.EMPTY})}))}))})),[n,t,e])}}!function(e){e.SUCCESS="success",e.EMPTY="empty",e.CANCEL="cancel"}(r||(r={}))}}]);